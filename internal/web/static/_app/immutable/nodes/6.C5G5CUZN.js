import{d as Ze,a as n,f as i,s as u,c as pe}from"../chunks/Bph8Cap9.js";import{p as Ee,b as N,d as ge,t as z,a as Ne,e as Ue,s,c as t,$ as Xe,r as a,g as e,u as _e,n as Ge,i as m}from"../chunks/B8-RBE8K.js";import{i as x}from"../chunks/Cv1hhGhC.js";import{e as U,i as X,s as He,a as ee,b as be,r as Je}from"../chunks/DhYmL2PG.js";import{h as Oe}from"../chunks/DN4icXi7.js";import{b as We}from"../chunks/ByCfWYC6.js";import{b as Ye}from"../chunks/Cv9T790-.js";import{S as ea}from"../chunks/DMerq3PP.js";import{D as he}from"../chunks/CWxX7MD_.js";import{b as aa,r as ta}from"../chunks/EFiNwc8y.js";var sa=i('<button><div class="flex items-center gap-3 mb-3"><!> <div class="flex-1 min-w-0"><h3 class="text-sm font-semibold text-slate-200 truncate"> </h3> <p class="text-xs text-slate-500 font-mono truncate"> </p></div> <!></div> <div class="flex items-center justify-between text-xs"><span class="text-slate-500"> </span> <span class="px-2 py-0.5 rounded bg-surface-800 text-slate-400 font-mono"> </span></div></button>'),ra=i('<div class="flex items-center justify-center py-12 text-slate-500"><svg class="w-5 h-5 animate-spin mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> Loading schema...</div>'),la=i('<span class="text-slate-600">yes</span>'),na=i('<span class="text-slate-400">no</span>'),ia=i('<span class="px-1.5 py-0.5 rounded bg-amber-500/15 text-amber-400 font-bold">PK</span>'),oa=i('<span class="px-1.5 py-0.5 rounded bg-blue-500/15 text-blue-400 font-bold">FK</span>'),da=i('<tr class="hover:bg-surface-800/20"><td class="px-3 py-2 font-mono text-slate-200"> </td><td class="px-3 py-2 font-mono text-amber-300/70"> </td><td class="px-3 py-2 text-center"><!></td><td class="px-3 py-2 font-mono text-slate-500"> </td><td class="px-3 py-2 text-center"><!> <!></td></tr>'),ua=i('<span class="px-1 py-0.5 rounded bg-amber-500/10 text-amber-400 font-mono text-[10px]">UQ</span>'),ca=i('<span class="px-1 py-0.5 rounded bg-surface-700/50 text-slate-500 font-mono text-[10px]">IX</span>'),va=i('<div class="flex items-center gap-2 text-xs"><!> <span class="font-mono text-slate-400 truncate"> </span></div>'),pa=i('<div><h4 class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-1.5">Indexes</h4> <div class="space-y-1"></div></div>'),_a=i('<div class="text-xs"><span class="font-mono text-slate-400"> </span> <span class="text-surface-600 mx-1">&rarr;</span> <span class="font-mono text-blue-400"> </span></div>'),fa=i('<div><h4 class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-1.5">Foreign Keys</h4> <div class="space-y-1"></div></div>'),ma=i('<div class="mt-3 grid grid-cols-2 gap-3"><!> <!></div>'),xa=i('<div class="px-5 pb-4 pl-16"><div class="rounded-lg border border-surface-700/30 overflow-hidden"><table class="w-full text-xs"><thead><tr class="bg-surface-800/50"><th class="px-3 py-2 text-left text-slate-500 font-medium uppercase tracking-wider">Column</th><th class="px-3 py-2 text-left text-slate-500 font-medium uppercase tracking-wider">Type</th><th class="px-3 py-2 text-center text-slate-500 font-medium uppercase tracking-wider">Null</th><th class="px-3 py-2 text-left text-slate-500 font-medium uppercase tracking-wider">Default</th><th class="px-3 py-2 text-center text-slate-500 font-medium uppercase tracking-wider">Keys</th></tr></thead><tbody class="divide-y divide-surface-800/30"></tbody></table></div> <!></div>'),ya=i('<div><button class="flex items-center gap-3 w-full px-5 py-3 text-left hover:bg-surface-800/30 transition-colors group"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg> <svg class="w-4 h-4 text-surface-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125"></path></svg> <span class="font-mono text-sm text-amber-300/90"> </span> <span class="text-xs text-slate-500 ml-auto"> </span> <span class="text-xs text-slate-600 font-mono"> </span></button> <!></div>'),ga=i('<div class="divide-y divide-surface-800/50"></div>'),ba=i('<div class="bg-surface-900 border border-surface-700/50 rounded-xl overflow-hidden"><div class="flex items-center justify-between px-5 py-4 border-b border-surface-700/50"><div class="flex items-center gap-3"><!> <h2 class="text-sm font-semibold text-slate-200"> </h2> <span class="text-xs text-slate-500">Schema Explorer</span></div> <div class="flex items-center gap-3"><div class="relative"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> <input type="text" class="pl-9 pr-3 py-1.5 bg-surface-800 border border-surface-700 rounded-lg text-sm text-slate-300 placeholder:text-surface-600 focus:outline-none focus:border-accent-500/50 w-48" placeholder="Filter tables..."/></div> <button class="text-xs text-rose-400/60 hover:text-rose-400 transition-colors">Remove</button></div></div> <!></div>'),ha=i('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-semibold text-slate-100 tracking-tight">Sources</h1> <p class="mt-1 text-sm text-slate-400">Manage your database connections</p></div> <a class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-accent-500 text-surface-950 font-medium text-sm hover:bg-accent-400 transition-colors"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg> Add Source</a></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div> <!></div>');function Ba(ke,we){Ee(we,!0);let g=N(null),K=N(ge([])),L=N(ge(new Set)),ae=N(!1),G=N("");const Se=[{id:"demo-pg",name:"Production DB",type:"PostgreSQL",host:"db.example.com",port:5432,database:"myapp",tables:24,status:"connected",access_mode:"read-only",created_at:"2026-02-24T10:00:00Z"},{id:"demo-mysql",name:"Analytics",type:"MySQL",host:"analytics.internal",port:3306,database:"analytics",tables:8,status:"connected",access_mode:"read-only",created_at:"2026-02-24T11:00:00Z"}],$e=[{name:"users",schema:"public",row_count:15420,columns:[{name:"id",type:"uuid",nullable:!1,default_value:"gen_random_uuid()",is_primary_key:!0,is_foreign_key:!1},{name:"email",type:"varchar(255)",nullable:!1,default_value:null,is_primary_key:!1,is_foreign_key:!1},{name:"name",type:"varchar(128)",nullable:!0,default_value:null,is_primary_key:!1,is_foreign_key:!1},{name:"created_at",type:"timestamptz",nullable:!1,default_value:"now()",is_primary_key:!1,is_foreign_key:!1},{name:"org_id",type:"uuid",nullable:!0,default_value:null,is_primary_key:!1,is_foreign_key:!0}],primary_key:["id"],indexes:[{name:"users_pkey",columns:["id"],unique:!0},{name:"users_email_idx",columns:["email"],unique:!0}],foreign_keys:[{column:"org_id",references_table:"organizations",references_column:"id"}]},{name:"orders",schema:"public",row_count:89234,columns:[{name:"id",type:"bigserial",nullable:!1,default_value:null,is_primary_key:!0,is_foreign_key:!1},{name:"user_id",type:"uuid",nullable:!1,default_value:null,is_primary_key:!1,is_foreign_key:!0},{name:"total",type:"numeric(10,2)",nullable:!1,default_value:"0.00",is_primary_key:!1,is_foreign_key:!1},{name:"status",type:"varchar(32)",nullable:!1,default_value:"'pending'",is_primary_key:!1,is_foreign_key:!1},{name:"created_at",type:"timestamptz",nullable:!1,default_value:"now()",is_primary_key:!1,is_foreign_key:!1}],primary_key:["id"],indexes:[{name:"orders_pkey",columns:["id"],unique:!0},{name:"orders_user_id_idx",columns:["user_id"],unique:!1},{name:"orders_status_idx",columns:["status"],unique:!1}],foreign_keys:[{column:"user_id",references_table:"users",references_column:"id"}]},{name:"products",schema:"public",row_count:1247,columns:[{name:"id",type:"uuid",nullable:!1,default_value:"gen_random_uuid()",is_primary_key:!0,is_foreign_key:!1},{name:"name",type:"varchar(256)",nullable:!1,default_value:null,is_primary_key:!1,is_foreign_key:!1},{name:"price",type:"numeric(10,2)",nullable:!1,default_value:null,is_primary_key:!1,is_foreign_key:!1},{name:"category",type:"varchar(64)",nullable:!0,default_value:null,is_primary_key:!1,is_foreign_key:!1}],primary_key:["id"],indexes:[{name:"products_pkey",columns:["id"],unique:!0}],foreign_keys:[]},{name:"organizations",schema:"public",row_count:342,columns:[{name:"id",type:"uuid",nullable:!1,default_value:"gen_random_uuid()",is_primary_key:!0,is_foreign_key:!1},{name:"name",type:"varchar(256)",nullable:!1,default_value:null,is_primary_key:!1,is_foreign_key:!1},{name:"plan",type:"varchar(32)",nullable:!1,default_value:"'free'",is_primary_key:!1,is_foreign_key:!1}],primary_key:["id"],indexes:[{name:"organizations_pkey",columns:["id"],unique:!0}],foreign_keys:[]}],Ce=_e(()=>ee.sources.length>0?ee.sources:Se);async function qe(r){m(g,r,!0),m(ae,!0),m(L,new Set,!0);try{m(K,await aa(r.id),!0)}catch{m(K,$e,!0)}m(ae,!1)}function ze(r){const l=new Set(e(L));l.has(r)?l.delete(r):l.add(r),m(L,l,!0)}async function Me(r){var l;try{await ta(r),ee.sources=ee.sources.filter(c=>c.id!==r),((l=e(g))==null?void 0:l.id)===r&&(m(g,null),m(K,[],!0))}catch{}}const Te=_e(()=>e(G)?e(K).filter(r=>r.name.toLowerCase().includes(e(G).toLowerCase())):e(K));function je(r){return r>=1e6?`${(r/1e6).toFixed(1)}M`:r>=1e3?`${(r/1e3).toFixed(1)}K`:r.toString()}var te=ha();Oe("1g9hndx",r=>{Ue(()=>{Xe.title="Sources — Conduit"})});var se=t(te),Be=s(t(se),2);a(se);var re=s(se,2);U(re,21,()=>e(Ce),X,(r,l)=>{var c=sa(),w=t(c),D=t(w);he(D,{get type(){return e(l).type},size:"md"});var M=s(D,2),P=t(M),H=t(P,!0);a(P);var T=s(P,2),J=t(T);a(T),a(M);var le=s(M,2);ea(le,{get status(){return e(l).status},label:"",class:"scale-75 origin-right"}),a(w);var O=s(w,2),Q=t(O),ne=t(Q);a(Q);var v=s(Q,2),S=t(v,!0);a(v),a(O),a(c),z(()=>{var W;be(c,1,`flex flex-col p-4 rounded-xl border-2 text-left transition-all duration-200 group
					${((W=e(g))==null?void 0:W.id)===e(l).id?"border-accent-500/50 bg-accent-500/5":"border-surface-700/50 bg-surface-900 hover:border-surface-600"}`),u(H,e(l).name),u(J,`${e(l).host??""}:${e(l).port??""}/${e(l).database??""}`),u(ne,`${e(l).tables??""} tables`),u(S,e(l).access_mode)}),pe("click",c,()=>qe(e(l))),n(r,c)}),a(re);var Fe=s(re,2);{var Ke=r=>{var l=ba(),c=t(l),w=t(c),D=t(w);he(D,{get type(){return e(g).type},size:"sm"});var M=s(D,2),P=t(M,!0);a(M),Ge(2),a(w);var H=s(w,2),T=t(H),J=s(t(T),2);Je(J),a(T);var le=s(T,2);a(H),a(c);var O=s(c,2);{var Q=v=>{var S=ra();n(v,S)},ne=v=>{var S=ga();U(S,21,()=>e(Te),X,(W,d)=>{var ie=ya(),Y=t(ie),fe=t(Y),oe=s(fe,4),Le=t(oe);a(oe);var de=s(oe,2),De=t(de);a(de);var me=s(de,2),Pe=t(me);a(me),a(Y);var Qe=s(Y,2);{var Ae=A=>{var I=xa(),ue=t(I),xe=t(ue),ye=s(t(xe));U(ye,21,()=>e(d).columns,X,(R,f)=>{var j=da(),V=t(j),ce=t(V,!0);a(V);var Z=s(V),y=t(Z,!0);a(Z);var p=s(Z),$=t(p);{var E=o=>{var q=la();n(o,q)},b=o=>{var q=na();n(o,q)};x($,o=>{e(f).nullable?o(E):o(b,!1)})}a(p);var _=s(p),h=t(_,!0);a(_);var B=s(_),C=t(B);{var F=o=>{var q=ia();n(o,q)};x(C,o=>{e(f).is_primary_key&&o(F)})}var ve=s(C,2);{var k=o=>{var q=oa();n(o,q)};x(ve,o=>{e(f).is_foreign_key&&o(k)})}a(B),a(j),z(()=>{u(ce,e(f).name),u(y,e(f).type),u(h,e(f).default_value??"—")}),n(R,j)}),a(ye),a(xe),a(ue);var Re=s(ue,2);{var Ve=R=>{var f=ma(),j=t(f);{var V=y=>{var p=pa(),$=s(t(p),2);U($,21,()=>e(d).indexes,X,(E,b)=>{var _=va(),h=t(_);{var B=k=>{var o=ua();n(k,o)},C=k=>{var o=ca();n(k,o)};x(h,k=>{e(b).unique?k(B):k(C,!1)})}var F=s(h,2),ve=t(F,!0);a(F),a(_),z(()=>u(ve,e(b).name)),n(E,_)}),a($),a(p),n(y,p)};x(j,y=>{e(d).indexes.length>0&&y(V)})}var ce=s(j,2);{var Z=y=>{var p=fa(),$=s(t(p),2);U($,21,()=>e(d).foreign_keys,X,(E,b)=>{var _=_a(),h=t(_),B=t(h,!0);a(h);var C=s(h,4),F=t(C);a(C),a(_),z(()=>{u(B,e(b).column),u(F,`${e(b).references_table??""}.${e(b).references_column??""}`)}),n(E,_)}),a($),a(p),n(y,p)};x(ce,y=>{e(d).foreign_keys.length>0&&y(Z)})}a(f),n(R,f)};x(Re,R=>{(e(d).indexes.length>0||e(d).foreign_keys.length>0)&&R(Ve)})}a(I),n(A,I)},Ie=_e(()=>e(L).has(e(d).name));x(Qe,A=>{e(Ie)&&A(Ae)})}a(ie),z((A,I)=>{be(fe,0,`w-4 h-4 text-surface-600 transition-transform ${A??""}`),u(Le,`${e(d).schema??""}.${e(d).name??""}`),u(De,`${e(d).columns.length??""} cols`),u(Pe,`${I??""} rows`)},[()=>e(L).has(e(d).name)?"rotate-90":"",()=>je(e(d).row_count)]),pe("click",Y,()=>ze(e(d).name)),n(W,ie)}),a(S),n(v,S)};x(O,v=>{e(ae)?v(Q):v(ne,!1)})}a(l),z(()=>u(P,e(g).name)),We(J,()=>e(G),v=>m(G,v)),pe("click",le,()=>Me(e(g).id)),n(r,l)};x(Fe,r=>{e(g)&&r(Ke)})}a(te),z(()=>He(Be,"href",`${Ye??""}/setup`)),n(ke,te),Ne()}Ze(["click"]);export{Ba as component};
