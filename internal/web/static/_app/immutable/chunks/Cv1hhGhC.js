var j=Object.defineProperty;var Y=t=>{throw TypeError(t)};var q=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var w=(t,e,s)=>q(t,typeof e!="symbol"?e+"":e,s),x=(t,e,s)=>e.has(t)||Y("Cannot "+s);var a=(t,e,s)=>(x(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),F=(t,e,s,i)=>(x(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);import{k as U,M as z,N as O,O as G,x as C,P as k,v as M,D as Q,Q as V,R as W,j as X,S as J,E as K,T as ee,U as te,V as se,W as ae,B as ie,A as y,o as re,X as ne,Y as fe,Z as ce,g as D,d as ue,i as oe,_ as he,a0 as de,a1 as _e,a2 as le,a3 as ve,a4 as be,a5 as ge,a6 as Se,a7 as me,a8 as Ae,a9 as Te,aa as Pe}from"./B8-RBE8K.js";var d,_,h,g,T,P,I;class Re{constructor(e,s=!0){w(this,"anchor");b(this,d,new Map);b(this,_,new Map);b(this,h,new Map);b(this,g,new Set);b(this,T,!0);b(this,P,()=>{var e=U;if(a(this,d).has(e)){var s=a(this,d).get(e),i=a(this,_).get(s);if(i)z(i),a(this,g).delete(s);else{var c=a(this,h).get(s);c&&(a(this,_).set(s,c.effect),a(this,h).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),i=c.effect)}for(const[r,f]of a(this,d)){if(a(this,d).delete(r),r===e)break;const n=a(this,h).get(f);n&&(O(n.effect),a(this,h).delete(f))}for(const[r,f]of a(this,_)){if(r===s||a(this,g).has(r))continue;const n=()=>{if(Array.from(a(this,d).values()).includes(r)){var l=document.createDocumentFragment();V(f,l),l.append(C()),a(this,h).set(r,{effect:f,fragment:l})}else O(f);a(this,g).delete(r),a(this,_).delete(r)};a(this,T)||!i?(a(this,g).add(r),G(f,n,!1)):n()}}});b(this,I,e=>{a(this,d).delete(e);const s=Array.from(a(this,d).values());for(const[i,c]of a(this,h))s.includes(i)||(O(c.effect),a(this,h).delete(i))});this.anchor=e,F(this,T,s)}ensure(e,s){var i=U,c=W();if(s&&!a(this,_).has(e)&&!a(this,h).has(e))if(c){var r=document.createDocumentFragment(),f=C();r.append(f),a(this,h).set(e,{effect:k(()=>s(f)),fragment:r})}else a(this,_).set(e,k(()=>s(this.anchor)));if(a(this,d).set(i,e),c){for(const[n,u]of a(this,_))n===e?i.unskip_effect(u):i.skip_effect(u);for(const[n,u]of a(this,h))n===e?i.unskip_effect(u.effect):i.skip_effect(u.effect);i.oncommit(a(this,P)),i.ondiscard(a(this,I))}else M&&(this.anchor=Q),a(this,P).call(this)}}d=new WeakMap,_=new WeakMap,h=new WeakMap,g=new WeakMap,T=new WeakMap,P=new WeakMap,I=new WeakMap;function Oe(t,e,s=!1){M&&J();var i=new Re(t),c=s?K:0;function r(f,n){if(M){const v=ee(t);var u;if(v===te?u=0:v===se?u=!1:u=parseInt(v.substring(1)),f!==u){var l=ae();ie(l),i.anchor=l,y(!1),i.ensure(f,n),y(!0);return}}i.ensure(f,n)}X(()=>{var f=!1;e((n,u=0)=>{f=!0,r(u,n)}),f||r(!1,null)},c)}let E=!1;function Ee(t){var e=E;try{return E=!1,[t(),E]}finally{E=e}}function De(t,e,s,i){var B;var c=!be||(s&ge)!==0,r=(s&ve)!==0,f=(s&le)!==0,n=i,u=!0,l=()=>(u&&(u=!1,n=f?re(i):i),n),v;if(r){var H=Te in t||Pe in t;v=((B=ne(t,e))==null?void 0:B.set)??(H&&e in t?o=>t[e]=o:void 0)}var m,N=!1;r?[m,N]=Ee(()=>t[e]):m=t[e],m===void 0&&i!==void 0&&(m=l(),v&&(c&&fe(),v(m)));var S;if(c?S=()=>{var o=t[e];return o===void 0?l():(u=!0,o)}:S=()=>{var o=t[e];return o!==void 0&&(n=void 0),o===void 0?n:o},c&&(s&ce)===0)return S;if(v){var Z=t.$$legacy;return(function(o,R){return arguments.length>0?((!c||!R||Z||N)&&v(R?S():o),o):S()})}var p=!1,A=((s&Se)!==0?me:Ae)(()=>(p=!1,S()));r&&D(A);var $=de;return(function(o,R){if(arguments.length>0){const L=R?D(A):c&&r?ue(o):o;return oe(A,L),p=!0,n!==void 0&&(n=L),o}return he&&p||($.f&_e)!==0?A.v:D(A)})}export{Re as B,Oe as i,De as p};
